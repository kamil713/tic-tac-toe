"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var helpTurn,circleTurn,currentMode,fieldX,fieldY,infoUserName=document.querySelector(".info__player-name"),startPanelSection=document.querySelector(".start-panel"),settingsSection=document.querySelector(".settings"),playModeSection=document.querySelector(".mode-panel"),pickSideSection=document.querySelector(".side"),gameSection=document.querySelector(".game"),settingsBtn=document.querySelector(".panel__button-settings"),continueBtn=document.querySelector(".panel__button-continue"),backBtn=document.querySelector(".panel__button-back"),playWithFriendBtn=document.querySelector(".panel__button-friend"),playWithAiBtn=document.querySelector(".panel__button-ai"),gameMode="",userName=document.querySelector(".name__input"),sideContinueBtn=document.querySelector(".panel__button-side"),circleSide=document.querySelector(".circle__checkbox"),crossSide=document.querySelector(".cross__checkbox"),root=(sideContinueBtn.addEventListener("click",function(){circleSide.checked||crossSide.checked?(helpTurn=circleTurn=!!circleSide.checked,console.log(circleTurn),pickSideSection.classList.toggle("hidden"),gameSection.classList.remove("hidden"),startGame()):alert("Choose your sign.")}),continueBtn.addEventListener("click",function(){""!==userName.value&&userName.value.length<=10?(startPanelSection.classList.toggle("hidden"),playModeSection.classList.remove("hidden"),infoUserName.textContent=userName.value):alert("Something went wrong. Try again.")}),playWithAiBtn.addEventListener("click",function(){playModeSection.classList.toggle("hidden"),pickSideSection.classList.remove("hidden"),gameMode="ai"}),playWithFriendBtn.addEventListener("click",function(){playModeSection.classList.toggle("hidden"),pickSideSection.classList.remove("hidden"),gameMode=""}),settingsBtn.addEventListener("click",function(){startPanelSection.classList.toggle("hidden"),settingsSection.classList.remove("hidden")}),backBtn.addEventListener("click",function(){settingsSection.classList.toggle("hidden"),startPanelSection.classList.remove("hidden")}),document.documentElement),selectedDarkMode=document.querySelector(".selected--dark-mode"),optionsContainerDarkMode=document.querySelector(".options-container--dark-mode"),optionsListDarkMode=document.querySelectorAll(".option--dark-mode"),darkModeON=document.querySelector(".option--on"),darkModeOFF=document.querySelector(".option--off"),selectedDifficulty=(selectedDarkMode.addEventListener("click",function(){optionsContainerDarkMode.classList.toggle("active")}),optionsListDarkMode.forEach(function(e){e.addEventListener("click",function(){selectedDarkMode.innerHTML=e.querySelector("label").innerHTML,optionsContainerDarkMode.classList.remove("active")})}),darkModeON.addEventListener("click",function(){console.log("ON"),root.style.setProperty("--white","rgb(255, 255, 255)"),root.style.setProperty("--dark","rgb(35, 35, 35)")}),darkModeOFF.addEventListener("click",function(){console.log("OFF"),root.style.setProperty("--white","rgb(35, 35, 35)"),root.style.setProperty("--dark","rgb(255, 255, 255)")}),document.querySelector(".selected--difficulty")),optionsContainerDifficulty=document.querySelector(".options-container--difficulty"),optionsListDifficulty=document.querySelectorAll(".option--difficulty"),selectedLayout=(selectedDifficulty.addEventListener("click",function(){optionsContainerDifficulty.classList.toggle("active")}),optionsListDifficulty.forEach(function(e){e.addEventListener("click",function(){selectedDifficulty.innerHTML=e.querySelector("label").innerHTML,optionsContainerDifficulty.classList.remove("active")})}),document.querySelector(".selected--layout")),optionsContainerLayout=document.querySelector(".options-container--layout"),optionsListLayout=document.querySelectorAll(".option--layout"),redLayout=document.querySelector(".option--red"),greenLayout=document.querySelector(".option--green"),blueLayout=document.querySelector(".option--blue"),CROSS_CLASS=(selectedLayout.addEventListener("click",function(){optionsContainerLayout.classList.toggle("active")}),optionsListLayout.forEach(function(e){e.addEventListener("click",function(){selectedLayout.innerHTML=e.querySelector("label").innerHTML,optionsContainerLayout.classList.remove("active")})}),redLayout.addEventListener("click",function(){console.log("red"),root.style.setProperty("--red","rgb(160, 28, 53)"),root.style.setProperty("--light-red","rgb(255, 0, 66)"),root.style.setProperty("--light-red-opacity","rgba(255, 0, 66, 0.2)")}),greenLayout.addEventListener("click",function(){console.log("green"),console.log(root.style),root.style.setProperty("--red","rgb(28, 160, 53)"),root.style.setProperty("--light-red","rgb(0, 250, 66)"),root.style.setProperty("--light-red-opacity","rgba(0, 250, 66, 0.2)")}),blueLayout.addEventListener("click",function(){console.log("blue"),root.style.setProperty("--red","rgb(53, 28, 160)"),root.style.setProperty("--light-red","rgb(66, 0, 250)"),root.style.setProperty("--light-red-opacity","rgba(66, 0, 250, 0.2)")}),"cross"),CIRCLE_CLASS="circle",WINNING_COMBINATIONS=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],resultPlayer=document.querySelector(".result__player"),resultAI=document.querySelector(".result__ai"),restartBtn=document.querySelector(".panel__button-restart"),cellElements=document.querySelectorAll("[data-cell]"),board=document.getElementById("board"),winningMessageElement=document.getElementById("winningMessage"),winningMessageTextElement=document.querySelector("[data-wining-message-text]"),restartButton=document.getElementById("restartButton"),gameStatus="still running",currentBoard=[["","",""],["","",""],["","",""]],randomMode=(restartBtn.addEventListener("click",startGame),["easy","medium","hard"]),randomNumber=Math.floor(3*Math.random());function getModeClassForName(e){return"Random"===e?randomMode[randomNumber]:"Easy"===e?"easy":"Medium"===e?"medium":"Hard"===e?"hard":null}function notify(e){switch(console.log(currentMode),currentMode){case"easy":takeAEasyMove(e);break;case"medium":takeAMediumMove(e);break;case"hard":takeAHardMove(e)}}function startGame(){cellElements.forEach(function(e){e.classList.remove(CROSS_CLASS),e.classList.remove(CIRCLE_CLASS),e.removeEventListener("click",handleClick),e.addEventListener("click",handleClick,{once:!0})}),setBoardHoverClass(),winningMessageElement.classList.remove("show"),gameStatus="still runinng",currentBoard=[["","",""],["","",""],["","",""]],currentMode=getModeClassForName(selectedDifficulty.textContent)}function checkID(e){fieldY=e<3?(fieldX=e,0):e<6?(fieldX=e-3,1):(fieldX=e-6,2)}function handleClick(e){var e=e.target,t=circleTurn?CIRCLE_CLASS:CROSS_CLASS,r=circleTurn?CROSS_CLASS:CIRCLE_CLASS;console.log(currentBoard),"still runinng"===gameStatus&&(placeMark(e,t),handleCheckWin(t),checkID(e.id),""==currentBoard[fieldY][fieldX]&&(currentBoard[fieldY][fieldX]=t==CROSS_CLASS?"x":"o")),"still runinng"===gameStatus&&""!==gameMode&&(notify(r),handleCheckWin(r))}function handleCheckWin(e){checkWin(e)?endGame(!1):isDraw()?endGame(!0):(swapTurns(),setBoardHoverClass())}function endGame(e){gameStatus=(winningMessageTextElement.innerText=e?"Draw!":"".concat(circleTurn?"O's":"X's"," Wins!"),"finish"),winningMessageElement.classList.add("show")}function isDraw(){return _toConsumableArray(cellElements).every(function(e){return e.classList.contains(CROSS_CLASS)||e.classList.contains(CIRCLE_CLASS)})}function placeMark(e,t){e.classList.add(t)}function swapTurns(){circleTurn=!circleTurn}function setBoardHoverClass(){board.classList.remove(CROSS_CLASS),board.classList.remove(CIRCLE_CLASS),circleTurn?board.classList.add(CIRCLE_CLASS):board.classList.add(CROSS_CLASS)}function checkWin(t){return WINNING_COMBINATIONS.some(function(e){return e.every(function(e){return cellElements[e].classList.contains(t)})})}function takeAEasyMove(e){var t=[],r=(cellElements.forEach(function(e){e.classList.contains("cross")||e.classList.contains("circle")||t.push(e)}),t[Math.floor(Math.random()*t.length)]);void 0!==r&&(r.classList.add(e),r.removeEventListener("click",handleClick))}function takeAMediumMove(e){var t,r=[];cellElements.forEach(function(e){e.classList.contains("cross")||e.classList.contains("circle")||r.push(e)}),Boolean(Math.round(Math.random()))?(t=minMax(r.length,!1,!0),console.log("ai")):(t=r[Math.floor(Math.random()*r.length)].id,console.log("przypadkowa")),void 0!==t&&(console.log(t),cellElements[t].classList.add(e),cellElements[t].removeEventListener("click",handleClick),checkID(t),""==currentBoard[fieldY][fieldX]&&(currentBoard[fieldY][fieldX]=circleTurn?"o":"x"))}function takeAHardMove(e){var t=[],r=(cellElements.forEach(function(e){e.classList.contains("cross")||e.classList.contains("circle")||t.push(e)}),minMax(t.length,!1,!0));console.log(r),void 0!==r&&(console.log("wbiÅ‚em tu"),cellElements[r].classList.add(e),cellElements[r].removeEventListener("click",handleClick),checkID(r),""==currentBoard[fieldY][fieldX]&&(currentBoard[fieldY][fieldX]=circleTurn?"o":"x"))}function minMax(e,t,r){var n=circleTurn?"x":"o",o=circleTurn?"o":"x",c=!!t;if(checkIfSomeoneHasWon())return c?3:1;if(0==e)return 2;for(var i=0,a=[[0,0,0],[0,0,0],[0,0,0]],l=0;l<3;l++)for(var s=0;s<3;s++)""==currentBoard[l][s]&&(currentBoard[l][s]=c?n:o,a[l][s]=minMax(e-1,!t,!1),currentBoard[l][s]="");if(c)for(var i=3,d=0;d<3;d++)for(var u=0;u<3;u++)0!=a[d][u]&&a[d][u]<i&&(i=a[d][u]);else{var m=0,y=0;i=a[0][0];for(var f=0;f<3;f++)for(var S=0;S<3;S++)a[f][S]>i&&(i=a[f][S],m=S,y=f);if(r)return 3*y+m}return i}function checkIfSomeoneHasWon(){for(var e=0;e<3;e++)if(""!=currentBoard[e][0]&&currentBoard[e][0]==currentBoard[e][1]&&currentBoard[e][1]==currentBoard[e][2])return!0;for(var t=0;t<3;t++)if(""!=currentBoard[0][t]&&currentBoard[0][t]==currentBoard[1][t]&&currentBoard[1][t]==currentBoard[2][t])return!0;return""!=currentBoard[0][0]&&currentBoard[0][0]==currentBoard[1][1]&&currentBoard[1][1]==currentBoard[2][2]||""!=currentBoard[2][0]&&currentBoard[2][0]==currentBoard[1][1]&&currentBoard[1][1]==currentBoard[0][2]}restartButton.addEventListener("click",startGame);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYmFja0J0biIsImNpcmNsZVR1cm4iLCJjdXJyZW50TW9kZSIsImZpZWxkWCIsImZpZWxkWSIsImluZm9Vc2VyTmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0YXJ0UGFuZWxTZWN0aW9uIiwic2V0dGluZ3NTZWN0aW9uIiwicGxheU1vZGVTZWN0aW9uIiwicGlja1NpZGVTZWN0aW9uIiwiZ2FtZVNlY3Rpb24iLCJzZXR0aW5nc0J0biIsImNvbnRpbnVlQnRuIiwicGxheVdpdGhGcmllbmRCdG4iLCJwbGF5V2l0aEFpQnRuIiwicm9vdCIsInNpZGVDb250aW51ZUJ0biIsImhlbHBUdXJuIiwiZ2FtZU1vZGUiLCJjaGVja2VkIiwiY29uc29sZSIsImNpcmNsZVNpZGUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJsb2ciLCJzdGFydEdhbWUiLCJhbGVydCIsInJlbW92ZSIsInZhbHVlIiwibGVuZ3RoIiwidGV4dENvbnRlbnQiLCJ1c2VyTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudEVsZW1lbnQiLCJzZWxlY3RlZERhcmtNb2RlIiwib3B0aW9uc0NvbnRhaW5lckRhcmtNb2RlIiwib3B0aW9uc0xpc3REYXJrTW9kZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkYXJrTW9kZU9GRiIsInNlbGVjdGVkRGlmZmljdWx0eSIsImZvckVhY2giLCJlbCIsImlubmVySFRNTCIsImRhcmtNb2RlT04iLCJzdHlsZSIsInNldFByb3BlcnR5Iiwib3B0aW9uc0NvbnRhaW5lckRpZmZpY3VsdHkiLCJvcHRpb25zTGlzdERpZmZpY3VsdHkiLCJyZWRMYXlvdXQiLCJzZWxlY3RlZExheW91dCIsIm9wdGlvbnNMaXN0TGF5b3V0IiwiZ3JlZW5MYXlvdXQiLCJibHVlTGF5b3V0IiwiQ1JPU1NfQ0xBU1MiLCJDSVJDTEVfQ0xBU1MiLCJXSU5OSU5HX0NPTUJJTkFUSU9OUyIsInJlc3VsdEFJIiwicmVzdGFydEJ0biIsImNlbGxFbGVtZW50cyIsImJvYXJkIiwiZ2V0RWxlbWVudEJ5SWQiLCJyZXN0YXJ0QnV0dG9uIiwiZ2FtZVN0YXR1cyIsImN1cnJlbnRCb2FyZCIsImdldE1vZGVDbGFzc0Zvck5hbWUiLCJuYW1lIiwicmVzdWx0UGxheWVyIiwidGFrZUFFYXN5TW92ZSIsInRha2VBTWVkaXVtTW92ZSIsInR1cm4iLCJ3aW5uaW5nTWVzc2FnZUVsZW1lbnQiLCJ3aW5uaW5nTWVzc2FnZVRleHRFbGVtZW50IiwiY2VsbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJNYXRoIiwiaGFuZGxlQ2xpY2siLCJzZXRCb2FyZEhvdmVyQ2xhc3MiLCJyYW5kb21Nb2RlIiwicmFuZG9tTnVtYmVyIiwiY2hlY2tJRCIsImlkIiwidGFrZUFIYXJkTW92ZSIsImFpQ3VycmVudENsYXNzIiwicGxhY2VNYXJrIiwiY3VycmVudENsYXNzIiwiaGFuZGxlQ2hlY2tXaW4iLCJvbmNlIiwiY2hlY2tXaW4iLCJzd2FwVHVybnMiLCJlIiwidGFyZ2V0IiwiaW5uZXJUZXh0IiwiYWRkIiwibm90aWZ5IiwiaXNEcmF3IiwiZW5kR2FtZSIsImRyYXciLCJjb25jYXQiLCJhdmFpbGFibGUiLCJldmVyeSIsImNvbnRhaW5zIiwicHVzaCIsInJhbmRvbUNlbGwiLCJ1bmRlZmluZWQiLCJCb29sZWFuIiwicm91bmQiLCJzb21lIiwiY29tYmluYXRpb24iLCJpbmRleCIsImZsb29yIiwicmFuZG9tIiwibWluTWF4IiwidHVyblgiLCJjaGVja0lmU29tZW9uZUhhc1dvbiIsImoiLCJmcmVlRmllbGRzIiwidmFsdWVzT2ZNb3ZlcyIsInZhbHVlT2ZUaGlzTW92ZSIsImkiLCJ4IiwiZGVwdGgwIiwiaHVtYW5UdXJuIiwiYWlUdXJuIiwic3VwcCIsInkiXSwibWFwcGluZ3MiOiIrK0JBRUEsSUFVTUEsU0FrT0pDLFdBdkJFQyxZQW9GSEMsT0FuQ0dDLE9BdFFFQyxhQUFlQyxTQUFTQyxjQUFjLHNCQUV0Q0Msa0JBQW9CRixTQUFTQyxjQUFjLGdCQUMzQ0UsZ0JBQWtC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Q3VCLElBQXRCdkQsYUFBYSxHQUFHdUQsSUFDaEJ2RCxhQUFhLEdBQUd1RCxJQUFNdkQsYUFBYSxHQUFHdUQsSUFDdEN2RCxhQUFhLEdBQUd1RCxJQUFNdkQsYUFBYSxHQUFHdUQsR0FFdEMsT0FBTyxFQUNULE1BQ3VCLElBQXRCdkQsYUFBYSxHQUFHLElBQ2hCQSxhQUFhLEdBQUcsSUFBTUEsYUFBYSxHQUFHLElBQ3RDQSxhQUFhLEdBQUcsSUFBTUEsYUFBYSxHQUFHLElBSWhCLElBQXRCQSxhQUFhLEdBQUcsSUFDaEJBLGFBQWEsR0FBRyxJQUFNQSxhQUFhLEdBQUcsSUFDdENBLGFBQWEsR0FBRyxJQUFNQSxhQUFhLEdBQUcsR0F6UnhDRixjQXFDZTdCLGlCQUFkLFFBQUFQIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogU1dJVENISU5HIEJFVFdFRU4gU0VDVElPTlMgKi9cclxuXHJcbmNvbnN0IGluZm9Vc2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmZvX19wbGF5ZXItbmFtZScpO1xyXG5cclxuY29uc3Qgc3RhcnRQYW5lbFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RhcnQtcGFuZWwnKTtcclxuY29uc3Qgc2V0dGluZ3NTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldHRpbmdzJyk7XHJcbmNvbnN0IHBsYXlNb2RlU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlLXBhbmVsJyk7XHJcbmNvbnN0IHBpY2tTaWRlU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlJyk7XHJcbmNvbnN0IGdhbWVTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWUnKTtcclxuXHJcbmNvbnN0IHNldHRpbmdzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhbmVsX19idXR0b24tc2V0dGluZ3MnKTtcclxuY29uc3QgY29udGludWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFuZWxfX2J1dHRvbi1jb250aW51ZScpO1xyXG5jb25zdCBiYWNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhbmVsX19idXR0b24tYmFjaycpO1xyXG5jb25zdCBwbGF5V2l0aEZyaWVuZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYW5lbF9fYnV0dG9uLWZyaWVuZCcpO1xyXG5jb25zdCBwbGF5V2l0aEFpQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhbmVsX19idXR0b24tYWknKTtcclxubGV0IGdhbWVNb2RlID0gJyc7XHJcblxyXG5jb25zdCB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYW1lX19pbnB1dCcpO1xyXG5cclxuY29uc3Qgc2lkZUNvbnRpbnVlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhbmVsX19idXR0b24tc2lkZScpO1xyXG5jb25zdCBjaXJjbGVTaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpcmNsZV9fY2hlY2tib3gnKTtcclxuY29uc3QgY3Jvc3NTaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyb3NzX19jaGVja2JveCcpO1xyXG5cclxubGV0IGhlbHBUdXJuO1xyXG5zaWRlQ29udGludWVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0aWYgKGNpcmNsZVNpZGUuY2hlY2tlZCB8fCBjcm9zc1NpZGUuY2hlY2tlZCkge1xyXG5cdFx0aWYgKGNpcmNsZVNpZGUuY2hlY2tlZCkge1xyXG5cdFx0XHRjaXJjbGVUdXJuID0gdHJ1ZTtcclxuXHRcdFx0aGVscFR1cm4gPSB0cnVlO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhjaXJjbGVUdXJuKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNpcmNsZVR1cm4gPSBmYWxzZTtcclxuXHRcdFx0aGVscFR1cm4gPSBmYWxzZTtcclxuXHRcdFx0Y29uc29sZS5sb2coY2lyY2xlVHVybik7XHJcblx0XHR9XHJcblxyXG5cdFx0cGlja1NpZGVTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG5cdFx0Z2FtZVNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblx0XHRzdGFydEdhbWUoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0YWxlcnQoJ0Nob29zZSB5b3VyIHNpZ24uJyk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnRpbnVlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGlmICh1c2VyTmFtZS52YWx1ZSAhPT0gJycgJiYgdXNlck5hbWUudmFsdWUubGVuZ3RoIDw9IDEwKSB7XHJcblx0XHRzdGFydFBhbmVsU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcclxuXHRcdHBsYXlNb2RlU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHJcblx0XHRpbmZvVXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyTmFtZS52YWx1ZTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0YWxlcnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBUcnkgYWdhaW4uJyk7XHJcblx0fVxyXG59KTtcclxuXHJcbnBsYXlXaXRoQWlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0cGxheU1vZGVTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG5cdHBpY2tTaWRlU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHRnYW1lTW9kZSA9ICdhaSc7XHJcbn0pO1xyXG5cclxucGxheVdpdGhGcmllbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0cGxheU1vZGVTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG5cdHBpY2tTaWRlU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHRnYW1lTW9kZSA9ICcnO1xyXG59KTtcclxuXHJcbnNldHRpbmdzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdHN0YXJ0UGFuZWxTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG5cdHNldHRpbmdzU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxufSk7XHJcblxyXG5iYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdHNldHRpbmdzU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcclxuXHRzdGFydFBhbmVsU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxufSk7XHJcblxyXG4vKiBPUFRJT05TIC8gU0VUVElOR1MgKi9cclxubGV0IHJvb3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcblxyXG4vKiBEQVJLIE1PREUgRUxFTUVOVCBMT0dJQyAqL1xyXG5jb25zdCBzZWxlY3RlZERhcmtNb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLS1kYXJrLW1vZGUnKTtcclxuY29uc3Qgb3B0aW9uc0NvbnRhaW5lckRhcmtNb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHQnLm9wdGlvbnMtY29udGFpbmVyLS1kYXJrLW1vZGUnXHJcbik7XHJcbmNvbnN0IG9wdGlvbnNMaXN0RGFya01vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aW9uLS1kYXJrLW1vZGUnKTtcclxuXHJcbmNvbnN0IGRhcmtNb2RlT04gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3B0aW9uLS1vbicpO1xyXG5jb25zdCBkYXJrTW9kZU9GRiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcHRpb24tLW9mZicpO1xyXG5cclxuc2VsZWN0ZWREYXJrTW9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRvcHRpb25zQ29udGFpbmVyRGFya01vZGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbn0pO1xyXG5cclxub3B0aW9uc0xpc3REYXJrTW9kZS5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0c2VsZWN0ZWREYXJrTW9kZS5pbm5lckhUTUwgPSBlbC5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmlubmVySFRNTDtcclxuXHRcdG9wdGlvbnNDb250YWluZXJEYXJrTW9kZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHR9KTtcclxufSk7XHJcblxyXG5kYXJrTW9kZU9OLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGNvbnNvbGUubG9nKCdPTicpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0td2hpdGUnLCAncmdiKDI1NSwgMjU1LCAyNTUpJyk7XHJcblx0cm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1kYXJrJywgJ3JnYigzNSwgMzUsIDM1KScpO1xyXG59KTtcclxuXHJcbmRhcmtNb2RlT0ZGLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGNvbnNvbGUubG9nKCdPRkYnKTtcclxuXHRyb290LnN0eWxlLnNldFByb3BlcnR5KCctLXdoaXRlJywgJ3JnYigzNSwgMzUsIDM1KScpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tZGFyaycsICdyZ2IoMjU1LCAyNTUsIDI1NSknKTtcclxufSk7XHJcblxyXG4vKiBESUZGSUNVTFRZIEVMRU1FTlQgTE9HSUMgKi9cclxuY29uc3Qgc2VsZWN0ZWREaWZmaWN1bHR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLS1kaWZmaWN1bHR5Jyk7XHJcbmNvbnN0IG9wdGlvbnNDb250YWluZXJEaWZmaWN1bHR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHQnLm9wdGlvbnMtY29udGFpbmVyLS1kaWZmaWN1bHR5J1xyXG4pO1xyXG5cclxuY29uc3Qgb3B0aW9uc0xpc3REaWZmaWN1bHR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wdGlvbi0tZGlmZmljdWx0eScpO1xyXG5cclxuc2VsZWN0ZWREaWZmaWN1bHR5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdG9wdGlvbnNDb250YWluZXJEaWZmaWN1bHR5LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG59KTtcclxuXHJcbm9wdGlvbnNMaXN0RGlmZmljdWx0eS5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0c2VsZWN0ZWREaWZmaWN1bHR5LmlubmVySFRNTCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJykuaW5uZXJIVE1MO1xyXG5cdFx0b3B0aW9uc0NvbnRhaW5lckRpZmZpY3VsdHkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuLyogTEFZT1VUIEVMRU1FTlQgTE9HSUMgKi9cclxuY29uc3Qgc2VsZWN0ZWRMYXlvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtLWxheW91dCcpO1xyXG5jb25zdCBvcHRpb25zQ29udGFpbmVyTGF5b3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHQnLm9wdGlvbnMtY29udGFpbmVyLS1sYXlvdXQnXHJcbik7XHJcbmNvbnN0IG9wdGlvbnNMaXN0TGF5b3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wdGlvbi0tbGF5b3V0Jyk7XHJcblxyXG5jb25zdCByZWRMYXlvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3B0aW9uLS1yZWQnKTtcclxuY29uc3QgZ3JlZW5MYXlvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3B0aW9uLS1ncmVlbicpO1xyXG5jb25zdCBibHVlTGF5b3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9wdGlvbi0tYmx1ZScpO1xyXG5cclxuc2VsZWN0ZWRMYXlvdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0b3B0aW9uc0NvbnRhaW5lckxheW91dC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxufSk7XHJcblxyXG5vcHRpb25zTGlzdExheW91dC5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0c2VsZWN0ZWRMYXlvdXQuaW5uZXJIVE1MID0gZWwucXVlcnlTZWxlY3RvcignbGFiZWwnKS5pbm5lckhUTUw7XHJcblx0XHRvcHRpb25zQ29udGFpbmVyTGF5b3V0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbnJlZExheW91dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRjb25zb2xlLmxvZygncmVkJyk7XHJcblx0cm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZWQnLCAncmdiKDE2MCwgMjgsIDUzKScpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tbGlnaHQtcmVkJywgJ3JnYigyNTUsIDAsIDY2KScpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tbGlnaHQtcmVkLW9wYWNpdHknLCAncmdiYSgyNTUsIDAsIDY2LCAwLjIpJyk7XHJcbn0pO1xyXG5cclxuZ3JlZW5MYXlvdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0Y29uc29sZS5sb2coJ2dyZWVuJyk7XHJcblx0Ly8gY29sb3JzLnJlZCA9IGNvbG9ycy5ncmVlbjtcclxuXHRjb25zb2xlLmxvZyhyb290LnN0eWxlKTtcclxuXHRyb290LnN0eWxlLnNldFByb3BlcnR5KCctLXJlZCcsICdyZ2IoMjgsIDE2MCwgNTMpJyk7XHJcblx0cm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1saWdodC1yZWQnLCAncmdiKDAsIDI1MCwgNjYpJyk7XHJcblx0cm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1saWdodC1yZWQtb3BhY2l0eScsICdyZ2JhKDAsIDI1MCwgNjYsIDAuMiknKTtcclxufSk7XHJcblxyXG5ibHVlTGF5b3V0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGNvbnNvbGUubG9nKCdibHVlJyk7XHJcblx0cm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZWQnLCAncmdiKDUzLCAyOCwgMTYwKScpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tbGlnaHQtcmVkJywgJ3JnYig2NiwgMCwgMjUwKScpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tbGlnaHQtcmVkLW9wYWNpdHknLCAncmdiYSg2NiwgMCwgMjUwLCAwLjIpJyk7XHJcbn0pO1xyXG5cclxuLyogR0FNRSBMT0dJQyAqL1xyXG5cclxuY29uc3QgQ1JPU1NfQ0xBU1MgPSAnY3Jvc3MnO1xyXG5jb25zdCBDSVJDTEVfQ0xBU1MgPSAnY2lyY2xlJztcclxuY29uc3QgV0lOTklOR19DT01CSU5BVElPTlMgPSBbXHJcblx0WzAsIDEsIDJdLFxyXG5cdFszLCA0LCA1XSxcclxuXHRbNiwgNywgOF0sXHJcblx0WzAsIDMsIDZdLFxyXG5cdFsxLCA0LCA3XSxcclxuXHRbMiwgNSwgOF0sXHJcblx0WzAsIDQsIDhdLFxyXG5cdFsyLCA0LCA2XSxcclxuXTtcclxuXHJcbmxldCByZXN1bHRQbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0X19wbGF5ZXInKTtcclxubGV0IHJlc3VsdEFJID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlc3VsdF9fYWknKTtcclxuXHJcbmNvbnN0IHJlc3RhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFuZWxfX2J1dHRvbi1yZXN0YXJ0Jyk7XHJcbmNvbnN0IGNlbGxFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNlbGxdJyk7XHJcbmNvbnN0IGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvYXJkJyk7XHJcbmNvbnN0IHdpbm5pbmdNZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5uaW5nTWVzc2FnZScpO1xyXG5jb25zdCB3aW5uaW5nTWVzc2FnZVRleHRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHQnW2RhdGEtd2luaW5nLW1lc3NhZ2UtdGV4dF0nXHJcbik7XHJcbmNvbnN0IHJlc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGFydEJ1dHRvbicpO1xyXG5sZXQgY2lyY2xlVHVybjtcclxubGV0IGdhbWVTdGF0dXMgPSAnc3RpbGwgcnVubmluZyc7XHJcbmxldCBjdXJyZW50Qm9hcmQgPSBbXHJcblx0WycnLCAnJywgJyddLFxyXG5cdFsnJywgJycsICcnXSxcclxuXHRbJycsICcnLCAnJ10sXHJcbl07XHJcblxyXG5yZXN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnRHYW1lKTtcclxuXHJcbmxldCByYW5kb21Nb2RlID0gWydlYXN5JywgJ21lZGl1bScsICdoYXJkJ107XHJcbmxldCByYW5kb21OdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKTtcclxubGV0IGN1cnJlbnRNb2RlO1xyXG5cclxuZnVuY3Rpb24gZ2V0TW9kZUNsYXNzRm9yTmFtZShuYW1lKSB7XHJcblx0aWYgKG5hbWUgPT09ICdSYW5kb20nKSByZXR1cm4gcmFuZG9tTW9kZVtyYW5kb21OdW1iZXJdO1xyXG5cdGlmIChuYW1lID09PSAnRWFzeScpIHJldHVybiAnZWFzeSc7XHJcblx0aWYgKG5hbWUgPT09ICdNZWRpdW0nKSByZXR1cm4gJ21lZGl1bSc7XHJcblx0aWYgKG5hbWUgPT09ICdIYXJkJykgcmV0dXJuICdoYXJkJztcclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gbm90aWZ5KHR1cm4pIHtcclxuXHQvLyAuLi5cclxuXHRjb25zb2xlLmxvZyhjdXJyZW50TW9kZSk7XHJcblx0c3dpdGNoIChjdXJyZW50TW9kZSkge1xyXG5cdFx0Y2FzZSAnZWFzeSc6XHJcblx0XHRcdHRha2VBRWFzeU1vdmUodHVybik7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAnbWVkaXVtJzpcclxuXHRcdFx0dGFrZUFNZWRpdW1Nb3ZlKHR1cm4pO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgJ2hhcmQnOlxyXG5cdFx0XHR0YWtlQUhhcmRNb3ZlKHR1cm4pO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdC8vIC4uLlxyXG5cdH1cclxufVxyXG5cclxucmVzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0R2FtZSk7XHJcblxyXG5mdW5jdGlvbiBzdGFydEdhbWUoKSB7XHJcblx0Y2VsbEVsZW1lbnRzLmZvckVhY2goKGNlbGwpID0+IHtcclxuXHRcdGNlbGwuY2xhc3NMaXN0LnJlbW92ZShDUk9TU19DTEFTUyk7XHJcblx0XHRjZWxsLmNsYXNzTGlzdC5yZW1vdmUoQ0lSQ0xFX0NMQVNTKTtcclxuXHRcdGNlbGwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljayk7XHJcblx0XHRjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2ssIHsgb25jZTogdHJ1ZSB9KTtcclxuXHR9KTtcclxuXHJcblx0c2V0Qm9hcmRIb3ZlckNsYXNzKCk7XHJcblx0d2lubmluZ01lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuXHRnYW1lU3RhdHVzID0gJ3N0aWxsIHJ1bmlubmcnO1xyXG5cdGN1cnJlbnRCb2FyZCA9IFtcclxuXHRcdFsnJywgJycsICcnXSxcclxuXHRcdFsnJywgJycsICcnXSxcclxuXHRcdFsnJywgJycsICcnXSxcclxuXHRdO1xyXG5cdGN1cnJlbnRNb2RlID0gZ2V0TW9kZUNsYXNzRm9yTmFtZShzZWxlY3RlZERpZmZpY3VsdHkudGV4dENvbnRlbnQpO1xyXG59XHJcblxyXG5sZXQgZmllbGRYO1xyXG5sZXQgZmllbGRZO1xyXG5mdW5jdGlvbiBjaGVja0lEKGlkKSB7XHJcblx0aWYgKGlkIDwgMykge1xyXG5cdFx0ZmllbGRYID0gaWQ7XHJcblx0XHRmaWVsZFkgPSAwO1xyXG5cdH0gZWxzZSBpZiAoaWQgPCA2KSB7XHJcblx0XHRmaWVsZFggPSBpZCAtIDM7XHJcblx0XHRmaWVsZFkgPSAxO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRmaWVsZFggPSBpZCAtIDY7XHJcblx0XHRmaWVsZFkgPSAyO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xyXG5cdGNvbnN0IGNlbGwgPSBlLnRhcmdldDtcclxuXHRjb25zdCBjdXJyZW50Q2xhc3MgPSBjaXJjbGVUdXJuID8gQ0lSQ0xFX0NMQVNTIDogQ1JPU1NfQ0xBU1M7XHJcblx0Y29uc3QgYWlDdXJyZW50Q2xhc3MgPSAhY2lyY2xlVHVybiA/IENJUkNMRV9DTEFTUyA6IENST1NTX0NMQVNTO1xyXG5cdGNvbnNvbGUubG9nKGN1cnJlbnRCb2FyZCk7XHJcblx0aWYgKGdhbWVTdGF0dXMgPT09ICdzdGlsbCBydW5pbm5nJykge1xyXG5cdFx0cGxhY2VNYXJrKGNlbGwsIGN1cnJlbnRDbGFzcyk7XHJcblx0XHRoYW5kbGVDaGVja1dpbihjdXJyZW50Q2xhc3MpO1xyXG5cclxuXHRcdGNoZWNrSUQoY2VsbC5pZCk7XHJcblx0XHRpZiAoY3VycmVudEJvYXJkW2ZpZWxkWV1bZmllbGRYXSA9PSAnJykge1xyXG5cdFx0XHRjdXJyZW50Qm9hcmRbZmllbGRZXVtmaWVsZFhdID0gY3VycmVudENsYXNzID09IENST1NTX0NMQVNTID8gJ3gnIDogJ28nO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKGdhbWVTdGF0dXMgPT09ICdzdGlsbCBydW5pbm5nJykge1xyXG5cdFx0aWYgKGdhbWVNb2RlICE9PSAnJykge1xyXG5cdFx0XHRub3RpZnkoYWlDdXJyZW50Q2xhc3MpO1xyXG5cdFx0XHRoYW5kbGVDaGVja1dpbihhaUN1cnJlbnRDbGFzcyk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDaGVja1dpbihjdXJyZW50Q2xhc3MpIHtcclxuXHRpZiAoY2hlY2tXaW4oY3VycmVudENsYXNzKSkge1xyXG5cdFx0ZW5kR2FtZShmYWxzZSk7XHJcblx0fSBlbHNlIGlmIChpc0RyYXcoKSkge1xyXG5cdFx0ZW5kR2FtZSh0cnVlKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c3dhcFR1cm5zKCk7XHJcblx0XHRzZXRCb2FyZEhvdmVyQ2xhc3MoKTtcclxuXHR9XHJcblxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gZW5kR2FtZShkcmF3KSB7XHJcblx0aWYgKGRyYXcpIHtcclxuXHRcdHdpbm5pbmdNZXNzYWdlVGV4dEVsZW1lbnQuaW5uZXJUZXh0ID0gJ0RyYXchJztcclxuXHRcdGdhbWVTdGF0dXMgPSAnZmluaXNoJztcclxuXHR9IGVsc2Uge1xyXG5cdFx0d2lubmluZ01lc3NhZ2VUZXh0RWxlbWVudC5pbm5lclRleHQgPSBgJHtjaXJjbGVUdXJuID8gXCJPJ3NcIiA6IFwiWCdzXCJ9IFdpbnMhYDtcclxuXHRcdGdhbWVTdGF0dXMgPSAnZmluaXNoJztcclxuXHRcdC8vIGlmIChjaXJjbGVUdXJuKSB7XHJcblx0XHQvLyBcdHJlc3VsdFBsYXllci50ZXh0Q29udGVudCsrO1xyXG5cdFx0Ly8gfSBlbHNlIHtcclxuXHRcdC8vIFx0cmVzdWx0QUkudGV4dENvbnRlbnQrKztcclxuXHRcdC8vIH1cclxuXHR9XHJcblx0d2lubmluZ01lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNEcmF3KCkge1xyXG5cdHJldHVybiBbLi4uY2VsbEVsZW1lbnRzXS5ldmVyeSgoY2VsbCkgPT4ge1xyXG5cdFx0cmV0dXJuIChcclxuXHRcdFx0Y2VsbC5jbGFzc0xpc3QuY29udGFpbnMoQ1JPU1NfQ0xBU1MpIHx8XHJcblx0XHRcdGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKENJUkNMRV9DTEFTUylcclxuXHRcdCk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsYWNlTWFyayhjZWxsLCBjdXJyZW50Q2xhc3MpIHtcclxuXHRjZWxsLmNsYXNzTGlzdC5hZGQoY3VycmVudENsYXNzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3dhcFR1cm5zKCkge1xyXG5cdGNpcmNsZVR1cm4gPSAhY2lyY2xlVHVybjtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Qm9hcmRIb3ZlckNsYXNzKCkge1xyXG5cdGJvYXJkLmNsYXNzTGlzdC5yZW1vdmUoQ1JPU1NfQ0xBU1MpO1xyXG5cdGJvYXJkLmNsYXNzTGlzdC5yZW1vdmUoQ0lSQ0xFX0NMQVNTKTtcclxuXHRpZiAoY2lyY2xlVHVybikge1xyXG5cdFx0Ly8gdHJ5XHJcblx0XHRib2FyZC5jbGFzc0xpc3QuYWRkKENJUkNMRV9DTEFTUyk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGJvYXJkLmNsYXNzTGlzdC5hZGQoQ1JPU1NfQ0xBU1MpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tXaW4oY3VycmVudENsYXNzKSB7XHJcblx0cmV0dXJuIFdJTk5JTkdfQ09NQklOQVRJT05TLnNvbWUoKGNvbWJpbmF0aW9uKSA9PiB7XHJcblx0XHQvLyBjb25zb2xlLmxvZyhgY29tYmluYXRpb24gJHtjb21iaW5hdGlvbn1gKTtcclxuXHRcdHJldHVybiBjb21iaW5hdGlvbi5ldmVyeSgoaW5kZXgpID0+IHtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coYGluZGV4ICR7aW5kZXh9ICR7Y2VsbEVsZW1lbnRzW2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoY3VycmVudENsYXNzKX1gKTtcclxuXHRcdFx0cmV0dXJuIGNlbGxFbGVtZW50c1tpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKGN1cnJlbnRDbGFzcyk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxufVxyXG5cclxuLyogQ09OVFJPTCBHQU1FICovXHJcblxyXG5mdW5jdGlvbiB0YWtlQUVhc3lNb3ZlKHR1cm4pIHtcclxuXHRsZXQgYXZhaWxhYmxlID0gW107XHJcblx0Y2VsbEVsZW1lbnRzLmZvckVhY2goKGNlbGwpID0+IHtcclxuXHRcdGlmIChcclxuXHRcdFx0IWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdjcm9zcycpICYmXHJcblx0XHRcdCFjZWxsLmNsYXNzTGlzdC5jb250YWlucygnY2lyY2xlJylcclxuXHRcdCkge1xyXG5cdFx0XHRhdmFpbGFibGUucHVzaChjZWxsKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0bGV0IHJhbmRvbUNlbGwgPSBhdmFpbGFibGVbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXZhaWxhYmxlLmxlbmd0aCldO1xyXG5cdGlmIChyYW5kb21DZWxsICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdHJhbmRvbUNlbGwuY2xhc3NMaXN0LmFkZCh0dXJuKTtcclxuXHRcdHJhbmRvbUNlbGwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljayk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiB0YWtlQU1lZGl1bU1vdmUodHVybikge1xyXG5cdGxldCBhdmFpbGFibGUgPSBbXTtcclxuXHRjZWxsRWxlbWVudHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG5cdFx0aWYgKFxyXG5cdFx0XHQhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nyb3NzJykgJiZcclxuXHRcdFx0IWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaXJjbGUnKVxyXG5cdFx0KSB7XHJcblx0XHRcdGF2YWlsYWJsZS5wdXNoKGNlbGwpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRsZXQgcmFuZG9tQ2VsbDtcclxuXHRpZiAoQm9vbGVhbihNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpKSkge1xyXG5cdFx0cmFuZG9tQ2VsbCA9IG1pbk1heChhdmFpbGFibGUubGVuZ3RoLCBmYWxzZSwgdHJ1ZSk7XHJcblx0XHRjb25zb2xlLmxvZygnYWknKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmFuZG9tQ2VsbCA9IGF2YWlsYWJsZVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhdmFpbGFibGUubGVuZ3RoKV0uaWQ7IC8vXHJcblx0XHRjb25zb2xlLmxvZygncHJ6eXBhZGtvd2EnKTtcclxuXHR9XHJcblxyXG5cdGlmIChyYW5kb21DZWxsICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdGNvbnNvbGUubG9nKHJhbmRvbUNlbGwpO1xyXG5cdFx0Y2VsbEVsZW1lbnRzW3JhbmRvbUNlbGxdLmNsYXNzTGlzdC5hZGQodHVybik7XHJcblx0XHRjZWxsRWxlbWVudHNbcmFuZG9tQ2VsbF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljayk7XHJcblxyXG5cdFx0Y2hlY2tJRChyYW5kb21DZWxsKTtcclxuXHRcdGlmIChjdXJyZW50Qm9hcmRbZmllbGRZXVtmaWVsZFhdID09ICcnKSB7XHJcblx0XHRcdGN1cnJlbnRCb2FyZFtmaWVsZFldW2ZpZWxkWF0gPSAhY2lyY2xlVHVybiA/ICd4JyA6ICdvJztcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRha2VBSGFyZE1vdmUodHVybikge1xyXG5cdGxldCBhdmFpbGFibGUgPSBbXTtcclxuXHRjZWxsRWxlbWVudHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG5cdFx0aWYgKFxyXG5cdFx0XHQhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nyb3NzJykgJiZcclxuXHRcdFx0IWNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaXJjbGUnKVxyXG5cdFx0KSB7XHJcblx0XHRcdGF2YWlsYWJsZS5wdXNoKGNlbGwpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRsZXQgcmFuZG9tQ2VsbCA9IG1pbk1heChhdmFpbGFibGUubGVuZ3RoLCBmYWxzZSwgdHJ1ZSk7XHJcblx0Y29uc29sZS5sb2cocmFuZG9tQ2VsbCk7XHJcblx0aWYgKHJhbmRvbUNlbGwgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0Y29uc29sZS5sb2coJ3diacWCZW0gdHUnKTtcclxuXHRcdGNlbGxFbGVtZW50c1tyYW5kb21DZWxsXS5jbGFzc0xpc3QuYWRkKHR1cm4pO1xyXG5cdFx0Y2VsbEVsZW1lbnRzW3JhbmRvbUNlbGxdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2spO1xyXG5cclxuXHRcdGNoZWNrSUQocmFuZG9tQ2VsbCk7XHJcblx0XHRpZiAoY3VycmVudEJvYXJkW2ZpZWxkWV1bZmllbGRYXSA9PSAnJykge1xyXG5cdFx0XHRjdXJyZW50Qm9hcmRbZmllbGRZXVtmaWVsZFhdID0gIWNpcmNsZVR1cm4gPyAneCcgOiAnbyc7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBtaW5NYXgoZnJlZUZpZWxkcywgdHVyblgsIGRlcHRoMCkge1xyXG5cdGNvbnN0IGh1bWFuVHVybiA9IGNpcmNsZVR1cm4gPyAneCcgOiAnbyc7XHJcblx0Y29uc3QgYWlUdXJuID0gIWNpcmNsZVR1cm4gPyAneCcgOiAnbyc7XHJcblxyXG5cdGxldCBzdXBwID0gdHVyblggPyB0cnVlIDogZmFsc2U7XHJcblxyXG5cdGlmIChjaGVja0lmU29tZW9uZUhhc1dvbigpKSB7XHJcblx0XHRpZiAoc3VwcCkgcmV0dXJuIDM7XHJcblx0XHRlbHNlIHJldHVybiAxO1xyXG5cdH1cclxuXHJcblx0aWYgKGZyZWVGaWVsZHMgPT0gMCkgcmV0dXJuIDI7XHJcblx0bGV0IHZhbHVlT2ZUaGlzTW92ZSA9IDA7XHJcblx0bGV0IHZhbHVlc09mTW92ZXMgPSBbXHJcblx0XHRbMCwgMCwgMF0sXHJcblx0XHRbMCwgMCwgMF0sXHJcblx0XHRbMCwgMCwgMF0sXHJcblx0XTtcclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG5cdFx0Zm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcclxuXHRcdFx0aWYgKGN1cnJlbnRCb2FyZFtpXVtqXSA9PSAnJykge1xyXG5cdFx0XHRcdGlmIChzdXBwKSBjdXJyZW50Qm9hcmRbaV1bal0gPSBodW1hblR1cm47XHJcblx0XHRcdFx0ZWxzZSBjdXJyZW50Qm9hcmRbaV1bal0gPSBhaVR1cm47XHJcblx0XHRcdFx0dmFsdWVzT2ZNb3Zlc1tpXVtqXSA9IG1pbk1heChmcmVlRmllbGRzIC0gMSwgIXR1cm5YLCBmYWxzZSk7IC8vID4+Pj8/Pz9cclxuXHRcdFx0XHRjdXJyZW50Qm9hcmRbaV1bal0gPSAnJztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKHN1cHApIHtcclxuXHRcdHZhbHVlT2ZUaGlzTW92ZSA9IDM7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKylcclxuXHRcdFx0Zm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspXHJcblx0XHRcdFx0aWYgKHZhbHVlc09mTW92ZXNbaV1bal0gIT0gMCAmJiB2YWx1ZXNPZk1vdmVzW2ldW2pdIDwgdmFsdWVPZlRoaXNNb3ZlKVxyXG5cdFx0XHRcdFx0dmFsdWVPZlRoaXNNb3ZlID0gdmFsdWVzT2ZNb3Zlc1tpXVtqXTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0bGV0IHggPSAwO1xyXG5cdFx0bGV0IHkgPSAwO1xyXG5cdFx0dmFsdWVPZlRoaXNNb3ZlID0gdmFsdWVzT2ZNb3Zlc1swXVswXTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcblx0XHRcdGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XHJcblx0XHRcdFx0aWYgKHZhbHVlc09mTW92ZXNbaV1bal0gPiB2YWx1ZU9mVGhpc01vdmUpIHtcclxuXHRcdFx0XHRcdHZhbHVlT2ZUaGlzTW92ZSA9IHZhbHVlc09mTW92ZXNbaV1bal07XHJcblx0XHRcdFx0XHR4ID0gajtcclxuXHRcdFx0XHRcdHkgPSBpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYgKGRlcHRoMCkgcmV0dXJuIHkgKiAzICsgeDtcclxuXHR9XHJcblxyXG5cdHJldHVybiB2YWx1ZU9mVGhpc01vdmU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrSWZTb21lb25lSGFzV29uKCkge1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKVxyXG5cdFx0aWYgKFxyXG5cdFx0XHRjdXJyZW50Qm9hcmRbaV1bMF0gIT0gJycgJiZcclxuXHRcdFx0Y3VycmVudEJvYXJkW2ldWzBdID09IGN1cnJlbnRCb2FyZFtpXVsxXSAmJlxyXG5cdFx0XHRjdXJyZW50Qm9hcmRbaV1bMV0gPT0gY3VycmVudEJvYXJkW2ldWzJdXHJcblx0XHQpXHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKVxyXG5cdFx0aWYgKFxyXG5cdFx0XHRjdXJyZW50Qm9hcmRbMF1baV0gIT0gJycgJiZcclxuXHRcdFx0Y3VycmVudEJvYXJkWzBdW2ldID09IGN1cnJlbnRCb2FyZFsxXVtpXSAmJlxyXG5cdFx0XHRjdXJyZW50Qm9hcmRbMV1baV0gPT0gY3VycmVudEJvYXJkWzJdW2ldXHJcblx0XHQpXHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdGlmIChcclxuXHRcdGN1cnJlbnRCb2FyZFswXVswXSAhPSAnJyAmJlxyXG5cdFx0Y3VycmVudEJvYXJkWzBdWzBdID09IGN1cnJlbnRCb2FyZFsxXVsxXSAmJlxyXG5cdFx0Y3VycmVudEJvYXJkWzFdWzFdID09IGN1cnJlbnRCb2FyZFsyXVsyXVxyXG5cdClcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdGlmIChcclxuXHRcdGN1cnJlbnRCb2FyZFsyXVswXSAhPSAnJyAmJlxyXG5cdFx0Y3VycmVudEJvYXJkWzJdWzBdID09IGN1cnJlbnRCb2FyZFsxXVsxXSAmJlxyXG5cdFx0Y3VycmVudEJvYXJkWzFdWzFdID09IGN1cnJlbnRCb2FyZFswXVsyXVxyXG5cdClcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG4iXX0=
