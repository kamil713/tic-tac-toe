"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var circleTurn,infoUserName=document.querySelector(".info__player-name"),startPanelSection=document.querySelector(".start-panel"),settingsSection=document.querySelector(".settings"),playModeSection=document.querySelector(".mode-panel"),pickSideSection=document.querySelector(".side"),gameSection=document.querySelector(".game"),settingsBtn=document.querySelector(".panel__button-settings"),continueBtn=document.querySelector(".panel__button-continue"),backBtn=document.querySelector(".panel__button-back"),playWithFriendBtn=document.querySelector(".panel__button-friend"),playWithAiBtn=document.querySelector(".panel__button-ai"),userName=document.querySelector(".name__input"),sideContinueBtn=document.querySelector(".panel__button-side"),circleSide=document.querySelector(".circle__checkbox"),crossSide=document.querySelector(".cross__checkbox"),root=(sideContinueBtn.addEventListener("click",function(){circleSide.checked||crossSide.checked?(circleTurn=!!circleSide.checked,console.log(circleTurn),pickSideSection.classList.toggle("hidden"),gameSection.classList.remove("hidden"),startGame()):alert("Choose your sign.")}),continueBtn.addEventListener("click",function(){""!==userName.value&&userName.value.length<=10?(startPanelSection.classList.toggle("hidden"),playModeSection.classList.remove("hidden"),infoUserName.textContent=userName.value):alert("Something went wrong. Try again.")}),playWithFriendBtn.addEventListener("click",function(){playModeSection.classList.toggle("hidden"),pickSideSection.classList.remove("hidden")}),settingsBtn.addEventListener("click",function(){startPanelSection.classList.toggle("hidden"),settingsSection.classList.remove("hidden")}),backBtn.addEventListener("click",function(){settingsSection.classList.toggle("hidden"),startPanelSection.classList.remove("hidden")}),document.documentElement),selectedDarkMode=document.querySelector(".selected--dark-mode"),optionsContainerDarkMode=document.querySelector(".options-container--dark-mode"),optionsListDarkMode=document.querySelectorAll(".option--dark-mode"),darkModeON=document.querySelector(".option--on"),darkModeOFF=document.querySelector(".option--off"),selectedDifficulty=(selectedDarkMode.addEventListener("click",function(){optionsContainerDarkMode.classList.toggle("active")}),optionsListDarkMode.forEach(function(e){e.addEventListener("click",function(){selectedDarkMode.innerHTML=e.querySelector("label").innerHTML,optionsContainerDarkMode.classList.remove("active")})}),darkModeON.addEventListener("click",function(){console.log("ON"),root.style.setProperty("--white","rgb(255, 255, 255)"),root.style.setProperty("--dark","rgb(35, 35, 35)")}),darkModeOFF.addEventListener("click",function(){console.log("OFF"),root.style.setProperty("--white","rgb(35, 35, 35)"),root.style.setProperty("--dark","rgb(255, 255, 255)")}),document.querySelector(".selected--difficulty")),optionsContainerDifficulty=document.querySelector(".options-container--difficulty"),optionsListDifficulty=document.querySelectorAll(".option--difficulty"),selectedLayout=(selectedDifficulty.addEventListener("click",function(){optionsContainerDifficulty.classList.toggle("active")}),optionsListDifficulty.forEach(function(e){e.addEventListener("click",function(){selectedDifficulty.innerHTML=e.querySelector("label").innerHTML,optionsContainerDifficulty.classList.remove("active")})}),document.querySelector(".selected--layout")),optionsContainerLayout=document.querySelector(".options-container--layout"),optionsListLayout=document.querySelectorAll(".option--layout"),redLayout=document.querySelector(".option--red"),greenLayout=document.querySelector(".option--green"),blueLayout=document.querySelector(".option--blue"),CROSS_CLASS=(selectedLayout.addEventListener("click",function(){optionsContainerLayout.classList.toggle("active")}),optionsListLayout.forEach(function(e){e.addEventListener("click",function(){selectedLayout.innerHTML=e.querySelector("label").innerHTML,optionsContainerLayout.classList.remove("active")})}),redLayout.addEventListener("click",function(){console.log("red"),root.style.setProperty("--red","rgb(160, 28, 53)"),root.style.setProperty("--light-red","rgb(255, 0, 66)"),root.style.setProperty("--light-red-opacity","rgba(255, 0, 66, 0.2)")}),greenLayout.addEventListener("click",function(){console.log("green"),console.log(root.style),root.style.setProperty("--red","rgb(28, 160, 53)"),root.style.setProperty("--light-red","rgb(0, 250, 66)"),root.style.setProperty("--light-red-opacity","rgba(0, 250, 66, 0.2)")}),blueLayout.addEventListener("click",function(){console.log("blue"),root.style.setProperty("--red","rgb(53, 28, 160)"),root.style.setProperty("--light-red","rgb(66, 0, 250)"),root.style.setProperty("--light-red-opacity","rgba(66, 0, 250, 0.2)")}),"cross"),CIRCLE_CLASS="circle",WINNING_COMBINATIONS=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],cellElements=document.querySelectorAll("[data-cell]"),board=document.getElementById("board"),winningMessageElement=document.getElementById("winningMessage"),winningMessageTextElement=document.querySelector("[data-wining-message-text]"),restartButton=document.getElementById("restartButton"),gameStatus="still running";function startGame(){cellElements.forEach(function(e){e.classList.remove(CROSS_CLASS),e.classList.remove(CIRCLE_CLASS),e.removeEventListener("click",handleClick),e.addEventListener("click",handleClick,{once:!0})}),setBoardHoverClass(),winningMessageElement.classList.remove("show"),gameStatus="still runinng"}function handleClick(e){var e=e.target,t=circleTurn?CIRCLE_CLASS:CROSS_CLASS,n=circleTurn?CROSS_CLASS:CIRCLE_CLASS;"still runinng"===gameStatus&&(placeMark(e,t),handleCheckWin(t)),"still runinng"===gameStatus&&(takeAEasyMove(n),handleCheckWin(n))}function handleCheckWin(e){checkWin(e)?endGame(!1):isDraw()?endGame(!0):(swapTurns(),setBoardHoverClass())}function endGame(e){gameStatus=(winningMessageTextElement.innerText=e?"Draw!":"".concat(circleTurn?"O's":"X's"," Wins!"),"finish"),winningMessageElement.classList.add("show")}function isDraw(){return _toConsumableArray(cellElements).every(function(e){return e.classList.contains(CROSS_CLASS)||e.classList.contains(CIRCLE_CLASS)})}function placeMark(e,t){e.classList.add(t)}function swapTurns(){circleTurn=!circleTurn}function setBoardHoverClass(){board.classList.remove(CROSS_CLASS),board.classList.remove(CIRCLE_CLASS),circleTurn?board.classList.add(CIRCLE_CLASS):board.classList.add(CROSS_CLASS)}function checkWin(t){return WINNING_COMBINATIONS.some(function(e){return e.every(function(e){return cellElements[e].classList.contains(t)})})}restartButton.addEventListener("click",startGame);var randomMode=["easy","medium","hard"],randomNumber=Math.floor(3*Math.random()),currentMode=getModeClassForName(selectedDifficulty.textContent);function getModeClassForName(e){return"Random"===e?randomMode[randomNumber]:"Easy"===e?"easy":"Medium"===e?"medium":"Hard"===e?"hard":null}function takeAEasyMove(e){var t=[],n=(cellElements.forEach(function(e){e.classList.contains("cross")||e.classList.contains("circle")||t.push(e)}),t[Math.floor(Math.random()*t.length)]);void 0!==n&&(n.classList.add(e),n.removeEventListener("click",handleClick))}function notify(e){"easy"===currentMode&&takeAEasyMove(e)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2lyY2xlVHVybiIsImluZm9Vc2VyTmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0YXJ0UGFuZWxTZWN0aW9uIiwic2V0dGluZ3NTZWN0aW9uIiwicGxheU1vZGVTZWN0aW9uIiwicGlja1NpZGVTZWN0aW9uIiwiZ2FtZVNlY3Rpb24iLCJzZXR0aW5nc0J0biIsImNvbnRpbnVlQnRuIiwiYmFja0J0biIsInJvb3QiLCJzaWRlQ29udGludWVCdG4iLCJwbGF5V2l0aEZyaWVuZEJ0biIsInBsYXlXaXRoQWlCdG4iLCJ1c2VyTmFtZSIsImNvbnNvbGUiLCJjaXJjbGVTaWRlIiwidG9nZ2xlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic3RhcnRHYW1lIiwiYWxlcnQiLCJ2YWx1ZSIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkb2N1bWVudEVsZW1lbnQiLCJzZWxlY3RlZERhcmtNb2RlIiwiZGFya01vZGVPTiIsIm9wdGlvbnNDb250YWluZXJEYXJrTW9kZSIsIm9wdGlvbnNMaXN0RGlmZmljdWx0eSIsIm9wdGlvbnNMaXN0RGFya01vZGUiLCJmb3JFYWNoIiwiZWwiLCJpbm5lckhUTUwiLCJkYXJrTW9kZU9GRiIsImxvZyIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJzZWxlY3RlZERpZmZpY3VsdHkiLCJvcHRpb25zQ29udGFpbmVyRGlmZmljdWx0eSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZWxlY3RlZExheW91dCIsImdyZWVuTGF5b3V0Iiwib3B0aW9uc0NvbnRhaW5lckxheW91dCIsInJlZExheW91dCIsImJsdWVMYXlvdXQiLCJDUk9TU19DTEFTUyIsIm9wdGlvbnNMaXN0TGF5b3V0IiwiV0lOTklOR19DT01CSU5BVElPTlMiLCJjZWxsRWxlbWVudHMiLCJ3aW5uaW5nTWVzc2FnZUVsZW1lbnQiLCJ3aW5uaW5nTWVzc2FnZVRleHRFbGVtZW50IiwicmVzdGFydEJ1dHRvbiIsImdldEVsZW1lbnRCeUlkIiwiY2VsbCIsInNldEJvYXJkSG92ZXJDbGFzcyIsImdhbWVTdGF0dXMiLCJjdXJyZW50Q2xhc3MiLCJhaUN1cnJlbnRDbGFzcyIsInBsYWNlTWFyayIsImhhbmRsZUNoZWNrV2luIiwiZW5kR2FtZSIsImlzRHJhdyIsIkNJUkNMRV9DTEFTUyIsInN3YXBUdXJucyIsImhhbmRsZUNsaWNrIiwib25jZSIsImUiLCJ0YXJnZXQiLCJpbm5lclRleHQiLCJ0YWtlQUVhc3lNb3ZlIiwiY2hlY2tXaW4iLCJib2FyZCIsImFkZCIsIl90b0NvbnN1bWFibGVBcnJheSIsImV2ZXJ5IiwiY29udGFpbnMiLCJnZXRNb2RlQ2xhc3NGb3JOYW1lIiwibmFtZSIsInJhbmRvbUNlbGwiLCJNYXRoIiwiZmxvb3IiLCJ1bmRlZmluZWQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmFuZG9tTW9kZSIsInJhbmRvbU51bWJlciIsInJhbmRvbSIsImN1cnJlbnRNb2RlIiwidGV4dENvbnRlbnQiLCJ0dXJuIiwiYXZhaWxhYmxlIiwicHVzaCIsIm5vdGlmeSJdLCJtYXBwaW5ncyI6IisrQkFJQSxJQXlORUEsV0F6TklDLGFBQWVDLFNBQVNDLGNBQWMsc0JBRXRDQyxrQkFBb0JGLFNBQVNDLGNBQWMsZ0JBQzNDRSxnQkFBa0JILFNBQVNDLGNBQWMsYUFDekNHLGdCQUFrQkosU0FBU0MsY0FBYyxlQUN6Q0ksZ0JBQWtCTCxTQUFTQyxjQUFjLFNBQ3pDSyxZQUFjTixTQUFTQyxjQUFjLFNBRXJDTSxZQUFjUCxTQUFTQyxjQUFjLDJCQUNyQ08sWUFBY1IsU0FBU0MsY0FBYywyQkFYM0NRLFFBQUFULFNBQUFDLGNBQUEsdUJBRU1GLGtCQUFlQyxTQUFTQyxjQUFjLHlCQUV0Q0MsY0FBaUJGLFNBQUdBLGNBQVNDLHFCQUU3QkcsU0FBQUEsU0FBa0JKLGNBQVNDLGdCQUUzQkssZ0JBQWNOLFNBQVNDLGNBQWMsdUJBRXJDTSxXQUFjUCxTQUFTQyxjQUFjLHFCQUNyQ08sVUFBY1IsU0FBU0MsY0FBYyxvQkE0RHZDUyxNQTFESkMsZ0JB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V0EwRXRDLElBaUNDZ0UsV0FBQSxDQUFBLE9BQUEsU0FBQSxRQUlBQyxhQUFBTCxLQUFBQyxNQUFBLEVBQUFELEtBQUFNLFVBbkNLQyxZQUFjVixvQkFBb0J2QyxtQkFBbUJrRCxhQUUzRCxTQUFTWCxvQkFBb0JDLEdBQzVCLE1BQWEsV0FBVEEsRUFBMEJNLFdBQVdDLGNBQzVCLFNBQVRQLEVBQXdCLE9BQ2YsV0FBVEEsRUFBMEIsU0FDakIsU0FBVEEsRUFBd0IsT0FDckIsS0FJUixTQUFTUixjQUFjbUIsR0FDdEIsSUFBSUMsRUFBWSxHQU9aWCxHQU5KOUIsYUFBYWxCLFFBQVEsU0FBQ3VCLEdBQ2hCQSxFQUFLcEMsVUFBVTBELFNBQVMsVUFBYXRCLEVBQUtwQyxVQUFVMEQsU0FBUyxXQUNqRWMsRUFBVUMsS0FBS3JDLEtBSUFvQyxFQUFVVixLQUFLQyxNQUFNRCxLQUFLTSxTQUFXSSxFQUFVbkUsZUFDN0MyRCxJQUFmSCxJQUNIQSxFQUFXN0QsVUFBVXVELElBQUlnQixHQUN6QlYsRUFBV0ksb0JBQW9CLFFBQVNsQixjQU8xQyxTQUFTMkIsT0FBT0gsR0FHVCxTQURDRixhQUNPakIsY0FBY21CIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG4vKiBTV0lUQ0hJTkcgQkVUV0VFTiBTRUNUSU9OUyAqL1xyXG5cclxuY29uc3QgaW5mb1VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluZm9fX3BsYXllci1uYW1lJyk7XHJcblxyXG5jb25zdCBzdGFydFBhbmVsU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydC1wYW5lbCcpO1xyXG5jb25zdCBzZXR0aW5nc1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZ3MnKTtcclxuY29uc3QgcGxheU1vZGVTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGUtcGFuZWwnKTtcclxuY29uc3QgcGlja1NpZGVTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGUnKTtcclxuY29uc3QgZ2FtZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZScpO1xyXG5cclxuY29uc3Qgc2V0dGluZ3NCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFuZWxfX2J1dHRvbi1zZXR0aW5ncycpO1xyXG5jb25zdCBjb250aW51ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYW5lbF9fYnV0dG9uLWNvbnRpbnVlJyk7XHJcbmNvbnN0IGJhY2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFuZWxfX2J1dHRvbi1iYWNrJyk7XHJcbmNvbnN0IHBsYXlXaXRoRnJpZW5kQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhbmVsX19idXR0b24tZnJpZW5kJyk7XHJcbmNvbnN0IHBsYXlXaXRoQWlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFuZWxfX2J1dHRvbi1haScpO1xyXG5cclxuY29uc3QgdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmFtZV9faW5wdXQnKTtcclxuXHJcbmNvbnN0IHNpZGVDb250aW51ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYW5lbF9fYnV0dG9uLXNpZGUnKTtcclxuY29uc3QgY2lyY2xlU2lkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXJjbGVfX2NoZWNrYm94Jyk7XHJcbmNvbnN0IGNyb3NzU2lkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcm9zc19fY2hlY2tib3gnKTtcclxuXHJcbnNpZGVDb250aW51ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRpZiAoY2lyY2xlU2lkZS5jaGVja2VkIHx8IGNyb3NzU2lkZS5jaGVja2VkKSB7XHJcblx0XHRpZiAoY2lyY2xlU2lkZS5jaGVja2VkKSB7XHJcblx0XHRcdGNpcmNsZVR1cm4gPSB0cnVlO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhjaXJjbGVUdXJuKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNpcmNsZVR1cm4gPSBmYWxzZTtcclxuXHRcdFx0Y29uc29sZS5sb2coY2lyY2xlVHVybik7XHJcblx0XHR9XHJcblxyXG5cdFx0cGlja1NpZGVTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG5cdFx0Z2FtZVNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblx0XHRzdGFydEdhbWUoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0YWxlcnQoJ0Nob29zZSB5b3VyIHNpZ24uJyk7XHJcblx0fVxyXG59KTtcclxuXHJcbmNvbnRpbnVlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGlmICh1c2VyTmFtZS52YWx1ZSAhPT0gJycgJiYgdXNlck5hbWUudmFsdWUubGVuZ3RoIDw9IDEwKSB7XHJcblx0XHRzdGFydFBhbmVsU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcclxuXHRcdHBsYXlNb2RlU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHJcblx0XHRpbmZvVXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyTmFtZS52YWx1ZTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0YWxlcnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBUcnkgYWdhaW4uJyk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8qIHBsYXlXaXRoQWlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0YWxlcnQoJ1N0aWxsIHdvcmtpbmcgb24gdGhhdCBzZWN0aW9uLCBiZSBwYXRpZW50IDopJyk7XHJcbn0pOyAqL1xyXG5cclxucGxheVdpdGhGcmllbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0cGxheU1vZGVTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG5cdHBpY2tTaWRlU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxufSk7XHJcblxyXG5zZXR0aW5nc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRzdGFydFBhbmVsU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcclxuXHRzZXR0aW5nc1NlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbn0pO1xyXG5cclxuYmFja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRzZXR0aW5nc1NlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XHJcblx0c3RhcnRQYW5lbFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbn0pO1xyXG5cclxuLyogT1BUSU9OUyAvIFNFVFRJTkdTICovXHJcbmxldCByb290ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG5cclxuLyogREFSSyBNT0RFIEVMRU1FTlQgTE9HSUMgKi9cclxuY29uc3Qgc2VsZWN0ZWREYXJrTW9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC0tZGFyay1tb2RlJyk7XHJcbmNvbnN0IG9wdGlvbnNDb250YWluZXJEYXJrTW9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0Jy5vcHRpb25zLWNvbnRhaW5lci0tZGFyay1tb2RlJ1xyXG4pO1xyXG5jb25zdCBvcHRpb25zTGlzdERhcmtNb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wdGlvbi0tZGFyay1tb2RlJyk7XHJcblxyXG5jb25zdCBkYXJrTW9kZU9OID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9wdGlvbi0tb24nKTtcclxuY29uc3QgZGFya01vZGVPRkYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3B0aW9uLS1vZmYnKTtcclxuXHJcbnNlbGVjdGVkRGFya01vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0b3B0aW9uc0NvbnRhaW5lckRhcmtNb2RlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG59KTtcclxuXHJcbm9wdGlvbnNMaXN0RGFya01vZGUuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdHNlbGVjdGVkRGFya01vZGUuaW5uZXJIVE1MID0gZWwucXVlcnlTZWxlY3RvcignbGFiZWwnKS5pbm5lckhUTUw7XHJcblx0XHRvcHRpb25zQ29udGFpbmVyRGFya01vZGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuZGFya01vZGVPTi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRjb25zb2xlLmxvZygnT04nKTtcclxuXHRyb290LnN0eWxlLnNldFByb3BlcnR5KCctLXdoaXRlJywgJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tZGFyaycsICdyZ2IoMzUsIDM1LCAzNSknKTtcclxufSk7XHJcblxyXG5kYXJrTW9kZU9GRi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRjb25zb2xlLmxvZygnT0ZGJyk7XHJcblx0cm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS13aGl0ZScsICdyZ2IoMzUsIDM1LCAzNSknKTtcclxuXHRyb290LnN0eWxlLnNldFByb3BlcnR5KCctLWRhcmsnLCAncmdiKDI1NSwgMjU1LCAyNTUpJyk7XHJcbn0pO1xyXG5cclxuLyogRElGRklDVUxUWSBFTEVNRU5UIExPR0lDICovXHJcbmNvbnN0IHNlbGVjdGVkRGlmZmljdWx0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC0tZGlmZmljdWx0eScpO1xyXG5jb25zdCBvcHRpb25zQ29udGFpbmVyRGlmZmljdWx0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0Jy5vcHRpb25zLWNvbnRhaW5lci0tZGlmZmljdWx0eSdcclxuKTtcclxuXHJcbmNvbnN0IG9wdGlvbnNMaXN0RGlmZmljdWx0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tLWRpZmZpY3VsdHknKTtcclxuXHJcbnNlbGVjdGVkRGlmZmljdWx0eS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRvcHRpb25zQ29udGFpbmVyRGlmZmljdWx0eS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxufSk7XHJcblxyXG5vcHRpb25zTGlzdERpZmZpY3VsdHkuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdHNlbGVjdGVkRGlmZmljdWx0eS5pbm5lckhUTUwgPSBlbC5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpLmlubmVySFRNTDtcclxuXHRcdG9wdGlvbnNDb250YWluZXJEaWZmaWN1bHR5LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbi8qIExBWU9VVCBFTEVNRU5UIExPR0lDICovXHJcbmNvbnN0IHNlbGVjdGVkTGF5b3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLS1sYXlvdXQnKTtcclxuY29uc3Qgb3B0aW9uc0NvbnRhaW5lckxheW91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0Jy5vcHRpb25zLWNvbnRhaW5lci0tbGF5b3V0J1xyXG4pO1xyXG5jb25zdCBvcHRpb25zTGlzdExheW91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tLWxheW91dCcpO1xyXG5cclxuY29uc3QgcmVkTGF5b3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9wdGlvbi0tcmVkJyk7XHJcbmNvbnN0IGdyZWVuTGF5b3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9wdGlvbi0tZ3JlZW4nKTtcclxuY29uc3QgYmx1ZUxheW91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcHRpb24tLWJsdWUnKTtcclxuXHJcbnNlbGVjdGVkTGF5b3V0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdG9wdGlvbnNDb250YWluZXJMYXlvdXQuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbn0pO1xyXG5cclxub3B0aW9uc0xpc3RMYXlvdXQuZm9yRWFjaCgoZWwpID0+IHtcclxuXHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdHNlbGVjdGVkTGF5b3V0LmlubmVySFRNTCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJykuaW5uZXJIVE1MO1xyXG5cdFx0b3B0aW9uc0NvbnRhaW5lckxheW91dC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuXHR9KTtcclxufSk7XHJcblxyXG5yZWRMYXlvdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0Y29uc29sZS5sb2coJ3JlZCcpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tcmVkJywgJ3JnYigxNjAsIDI4LCA1MyknKTtcclxuXHRyb290LnN0eWxlLnNldFByb3BlcnR5KCctLWxpZ2h0LXJlZCcsICdyZ2IoMjU1LCAwLCA2NiknKTtcclxuXHRyb290LnN0eWxlLnNldFByb3BlcnR5KCctLWxpZ2h0LXJlZC1vcGFjaXR5JywgJ3JnYmEoMjU1LCAwLCA2NiwgMC4yKScpO1xyXG59KTtcclxuXHJcbmdyZWVuTGF5b3V0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdGNvbnNvbGUubG9nKCdncmVlbicpO1xyXG5cdC8vIGNvbG9ycy5yZWQgPSBjb2xvcnMuZ3JlZW47XHJcblx0Y29uc29sZS5sb2cocm9vdC5zdHlsZSk7XHJcblx0cm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1yZWQnLCAncmdiKDI4LCAxNjAsIDUzKScpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tbGlnaHQtcmVkJywgJ3JnYigwLCAyNTAsIDY2KScpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tbGlnaHQtcmVkLW9wYWNpdHknLCAncmdiYSgwLCAyNTAsIDY2LCAwLjIpJyk7XHJcbn0pO1xyXG5cclxuYmx1ZUxheW91dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRjb25zb2xlLmxvZygnYmx1ZScpO1xyXG5cdHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tcmVkJywgJ3JnYig1MywgMjgsIDE2MCknKTtcclxuXHRyb290LnN0eWxlLnNldFByb3BlcnR5KCctLWxpZ2h0LXJlZCcsICdyZ2IoNjYsIDAsIDI1MCknKTtcclxuXHRyb290LnN0eWxlLnNldFByb3BlcnR5KCctLWxpZ2h0LXJlZC1vcGFjaXR5JywgJ3JnYmEoNjYsIDAsIDI1MCwgMC4yKScpO1xyXG59KTtcclxuXHJcbi8qIEdBTUUgTE9HSUMgKi9cclxuXHJcbmNvbnN0IENST1NTX0NMQVNTID0gJ2Nyb3NzJztcclxuY29uc3QgQ0lSQ0xFX0NMQVNTID0gJ2NpcmNsZSc7XHJcbmNvbnN0IFdJTk5JTkdfQ09NQklOQVRJT05TID0gW1xyXG5cdFswLCAxLCAyXSxcclxuXHRbMywgNCwgNV0sXHJcblx0WzYsIDcsIDhdLFxyXG5cdFswLCAzLCA2XSxcclxuXHRbMSwgNCwgN10sXHJcblx0WzIsIDUsIDhdLFxyXG5cdFswLCA0LCA4XSxcclxuXHRbMiwgNCwgNl0sXHJcbl07XHJcbmNvbnN0IGNlbGxFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNlbGxdJyk7XHJcbmNvbnN0IGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvYXJkJyk7XHJcbmNvbnN0IHdpbm5pbmdNZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5uaW5nTWVzc2FnZScpO1xyXG5jb25zdCB3aW5uaW5nTWVzc2FnZVRleHRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHQnW2RhdGEtd2luaW5nLW1lc3NhZ2UtdGV4dF0nXHJcbik7XHJcbmNvbnN0IHJlc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGFydEJ1dHRvbicpO1xyXG5sZXQgY2lyY2xlVHVybjtcclxubGV0IGdhbWVTdGF0dXMgPSAnc3RpbGwgcnVubmluZyc7XHJcblxyXG5yZXN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnRHYW1lKTtcclxuXHJcbmZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHtcclxuXHRjZWxsRWxlbWVudHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG5cdFx0Y2VsbC5jbGFzc0xpc3QucmVtb3ZlKENST1NTX0NMQVNTKTtcclxuXHRcdGNlbGwuY2xhc3NMaXN0LnJlbW92ZShDSVJDTEVfQ0xBU1MpO1xyXG5cdFx0Y2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTtcclxuXHRcdGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljaywgeyBvbmNlOiB0cnVlIH0pO1xyXG5cdH0pO1xyXG5cdHNldEJvYXJkSG92ZXJDbGFzcygpO1xyXG5cdHdpbm5pbmdNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XHJcblx0Z2FtZVN0YXR1cyA9ICdzdGlsbCBydW5pbm5nJztcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2xpY2soZSkge1xyXG5cdGNvbnN0IGNlbGwgPSBlLnRhcmdldDtcclxuXHRjb25zdCBjdXJyZW50Q2xhc3MgPSBjaXJjbGVUdXJuID8gQ0lSQ0xFX0NMQVNTIDogQ1JPU1NfQ0xBU1M7XHJcblx0Y29uc3QgYWlDdXJyZW50Q2xhc3MgPSBjaXJjbGVUdXJuID8gQ1JPU1NfQ0xBU1MgOiBDSVJDTEVfQ0xBU1M7XHJcblx0aWYgKGdhbWVTdGF0dXMgPT09ICdzdGlsbCBydW5pbm5nJykge1xyXG5cdFx0cGxhY2VNYXJrKGNlbGwsIGN1cnJlbnRDbGFzcyk7XHJcblx0XHRoYW5kbGVDaGVja1dpbihjdXJyZW50Q2xhc3MpO1xyXG5cdH1cclxuXHRpZiAoZ2FtZVN0YXR1cyA9PT0gJ3N0aWxsIHJ1bmlubmcnKSB7XHJcblx0XHR0YWtlQUVhc3lNb3ZlKGFpQ3VycmVudENsYXNzKTtcclxuXHRcdGhhbmRsZUNoZWNrV2luKGFpQ3VycmVudENsYXNzKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNoZWNrV2luKGN1cnJlbnRDbGFzcykge1xyXG5cdGlmIChjaGVja1dpbihjdXJyZW50Q2xhc3MpKSB7XHJcblx0XHRlbmRHYW1lKGZhbHNlKTtcclxuXHR9IGVsc2UgaWYgKGlzRHJhdygpKSB7XHJcblx0XHRlbmRHYW1lKHRydWUpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzd2FwVHVybnMoKTtcclxuXHRcdHNldEJvYXJkSG92ZXJDbGFzcygpO1xyXG5cdH1cclxufSBcclxuXHJcbmZ1bmN0aW9uIGVuZEdhbWUoZHJhdykge1xyXG5cdGlmIChkcmF3KSB7XHJcblx0XHR3aW5uaW5nTWVzc2FnZVRleHRFbGVtZW50LmlubmVyVGV4dCA9ICdEcmF3ISc7XHJcblx0XHRnYW1lU3RhdHVzID0gJ2ZpbmlzaCc7XHJcblx0fSBlbHNlIHtcclxuXHRcdHdpbm5pbmdNZXNzYWdlVGV4dEVsZW1lbnQuaW5uZXJUZXh0ID0gYCR7Y2lyY2xlVHVybiA/IFwiTydzXCIgOiBcIlgnc1wifSBXaW5zIWA7XHJcblx0XHRnYW1lU3RhdHVzID0gJ2ZpbmlzaCc7XHJcblx0fVxyXG5cdHdpbm5pbmdNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzRHJhdygpIHtcclxuXHRyZXR1cm4gWy4uLmNlbGxFbGVtZW50c10uZXZlcnkoKGNlbGwpID0+IHtcclxuXHRcdHJldHVybiAoXHJcblx0XHRcdGNlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKENST1NTX0NMQVNTKSB8fFxyXG5cdFx0XHRjZWxsLmNsYXNzTGlzdC5jb250YWlucyhDSVJDTEVfQ0xBU1MpXHJcblx0XHQpO1xyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwbGFjZU1hcmsoY2VsbCwgY3VycmVudENsYXNzKSB7XHJcblx0Ly8gd2hpbGUgKHRydWUpIHtcclxuXHQvLyBcdGlmIChjZWxsLmNsYXNzTGlzdC5jb250YWlucygnY3Jvc3MnKSB8fCBjZWxsLmNsYXNzTGlzdC5jb250YWlucygnY2lyY2xlJykpIHtcclxuXHQvLyBcdFx0cGxhY2VNYXJrKGNlbGwsIGN1cnJlbnRDbGFzcyk7XHJcblx0Ly8gXHR9IGVsc2Uge1xyXG5cdFx0XHRjZWxsLmNsYXNzTGlzdC5hZGQoY3VycmVudENsYXNzKTtcclxuXHQvLyBcdFx0YnJlYWs7XHJcblx0Ly8gXHR9XHJcblx0Ly8gfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzd2FwVHVybnMoKSB7XHJcblx0Y2lyY2xlVHVybiA9ICFjaXJjbGVUdXJuO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRCb2FyZEhvdmVyQ2xhc3MoKSB7XHJcblx0Ym9hcmQuY2xhc3NMaXN0LnJlbW92ZShDUk9TU19DTEFTUyk7XHJcblx0Ym9hcmQuY2xhc3NMaXN0LnJlbW92ZShDSVJDTEVfQ0xBU1MpO1xyXG5cdGlmIChjaXJjbGVUdXJuKSB7XHJcblx0XHRib2FyZC5jbGFzc0xpc3QuYWRkKENJUkNMRV9DTEFTUyk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGJvYXJkLmNsYXNzTGlzdC5hZGQoQ1JPU1NfQ0xBU1MpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tXaW4oY3VycmVudENsYXNzKSB7XHJcblx0cmV0dXJuIFdJTk5JTkdfQ09NQklOQVRJT05TLnNvbWUoKGNvbWJpbmF0aW9uKSA9PiB7XHJcblx0XHQvLyBjb25zb2xlLmxvZyhgY29tYmluYXRpb24gJHtjb21iaW5hdGlvbn1gKTtcclxuXHRcdHJldHVybiBjb21iaW5hdGlvbi5ldmVyeSgoaW5kZXgpID0+IHtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coYGluZGV4ICR7aW5kZXh9ICR7Y2VsbEVsZW1lbnRzW2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoY3VycmVudENsYXNzKX1gKTtcclxuXHRcdFx0cmV0dXJuIGNlbGxFbGVtZW50c1tpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKGN1cnJlbnRDbGFzcyk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLyogQ09OVFJPTCBHQU1FICovXHJcblxyXG5sZXQgcmFuZG9tTW9kZSA9IFsnZWFzeScsICdtZWRpdW0nLCAnaGFyZCddO1xyXG5sZXQgcmFuZG9tTnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyk7XHJcbmNvbnN0IGN1cnJlbnRNb2RlID0gZ2V0TW9kZUNsYXNzRm9yTmFtZShzZWxlY3RlZERpZmZpY3VsdHkudGV4dENvbnRlbnQpO1xyXG5cclxuZnVuY3Rpb24gZ2V0TW9kZUNsYXNzRm9yTmFtZShuYW1lKSB7XHJcblx0aWYgKG5hbWUgPT09ICdSYW5kb20nKSByZXR1cm4gcmFuZG9tTW9kZVtyYW5kb21OdW1iZXJdO1xyXG5cdGlmIChuYW1lID09PSAnRWFzeScpIHJldHVybiAnZWFzeSc7XHJcblx0aWYgKG5hbWUgPT09ICdNZWRpdW0nKSByZXR1cm4gJ21lZGl1bSc7XHJcblx0aWYgKG5hbWUgPT09ICdIYXJkJykgcmV0dXJuICdoYXJkJztcclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHRha2VBRWFzeU1vdmUodHVybikge1xyXG5cdGxldCBhdmFpbGFibGUgPSBbXTtcclxuXHRjZWxsRWxlbWVudHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xyXG5cdFx0aWYgKCFjZWxsLmNsYXNzTGlzdC5jb250YWlucygnY3Jvc3MnKSAmJiAhY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoJ2NpcmNsZScpKSB7XHJcblx0XHRcdGF2YWlsYWJsZS5wdXNoKGNlbGwpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdFxyXG5cdGxldCByYW5kb21DZWxsID0gYXZhaWxhYmxlW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGF2YWlsYWJsZS5sZW5ndGgpXTtcclxuXHRpZiAocmFuZG9tQ2VsbCAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRyYW5kb21DZWxsLmNsYXNzTGlzdC5hZGQodHVybik7XHJcblx0XHRyYW5kb21DZWxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2spO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbi8qIEFJICovXHJcblxyXG5mdW5jdGlvbiBub3RpZnkodHVybikge1xyXG5cdC8vIC4uLlxyXG5cdHN3aXRjaChjdXJyZW50TW9kZSkge1xyXG5cdFx0Y2FzZSAnZWFzeSc6IHRha2VBRWFzeU1vdmUodHVybik7IGJyZWFrO1xyXG5cdFx0Ly8gLi4uXHJcblx0fVxyXG59Il19
